(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.trydotnetLayout={}))})(this,function(exports){"use strict";function getTop(e){return e.getBoundingClientRect().top}function getTopMostVisible(elements){var height_threshold=20;for(var _i=0,elements_1=elements;_i<elements_1.length;_i++){var element=elements_1[_i];if(element.getBoundingClientRect().bottom>height_threshold)return element}}function trackTopmostSession(container,handler){if(handler){var sessionEditors_1=[];var topMost_1=null;container.addEventListener("scroll",function(scrollEvent){if(sessionEditors_1.length<=0){container.querySelectorAll("iframe[data-trydotnet-session-id]").forEach(function(e){sessionEditors_1.push(e);sessionEditors_1.sort(function(a,b){return getTop(a)-getTop(b)})})}else{var currentTopMost=getTopMostVisible(sessionEditors_1);if(currentTopMost!==topMost_1){var prevSession=topMost_1?topMost_1.dataset.trydotnetSessionId:"";topMost_1=currentTopMost;if(prevSession!==topMost_1.dataset.trydotnetSessionId){handler(topMost_1.dataset.trydotnetSessionId)}}}})}}exports.trackTopmostSession=trackTopmostSession;Object.defineProperty(exports,"__esModule",{value:true})});